{"version":3,"sources":["Rating.jsx","RMath.js","UI.js","SquadRating.jsx","RatingResetControls.jsx","App.js","reportWebVitals.js","index.js"],"names":["WHITELISTED_KEYS","Set","onBlur","props","e","newRating","parseInt","target","textContent","isNaN","rating","setRating","Rating","classHighLow","avg","className","onClick","contentEditable","onKeyDown","key","match","has","keyCode","preventDefault","onFocus","setTimeout","document","execCommand","sum","ratings","reduce","a","b","correction","ratingsAverage","acc","r","Math","max","RMath","sumWithCorrection","round","numberIntegerPart","n","toString","numberFractionalPart","fractional","zeroFill","pow","minLength","console","log","nStr","nbZeroes","length","repeat","UI","precision","p","multiplier","floor","Number","EPSILON","isInteger","SquadRating","ratingIntegerPart","ratingFractionalPart","decimalPart","RatingResetControls","onReset","useState","value","setValue","prev","window","confirm","ratingsArrayOf","Array","fill","BASE_RATINGS","App","baseSetRatings","setRatings","i","squadAverage","squadRating","notices","push","map","sort","notice","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b6f60633.chunk.js","sourcesContent":["const WHITELISTED_KEYS = new Set([\n  37, // left arrow\n  38, // up arrow\n  39, // right arrow\n  40, // down arrow\n  8, // backspace\n  46, // delete\n  9, // tab\n]);\n\nfunction onKeyDown(props) {\n  return (e) => {\n    if (!e.key.match(/^[0-9]/g) && !WHITELISTED_KEYS.has(e.keyCode)) {\n      e.preventDefault();\n    }\n  };\n}\n\nfunction onBlur(props) {\n  return (e) => {\n    const newRating = parseInt(e.target.textContent);\n\n    if (isNaN(newRating) || newRating < 1 || newRating > 99) {\n      // New value is not a valid rating.\n      e.target.textContent = props.rating;\n    } else {\n      props.setRating(newRating);\n    }\n  };\n}\n\nfunction onFocus(props) {\n  return (e) => {\n    setTimeout(function() {\n      document.execCommand('selectAll', false, null)\n    }, 0);\n  };\n}\n\nfunction Rating(props) {\n  const classHighLow = props.rating > props.avg ? \"RatingHigh\" : \"RatingLow\";\n  return (\n    <div className={`Rating ${classHighLow}`}>\n      <div\n        className=\"RatingControls RatingIncrease\"\n        onClick={() => props.setRating(props.rating + 1)}\n      ></div>\n      <div\n        className=\"RatingValue\"\n        contentEditable={true}\n        onKeyDown={onKeyDown(props)}\n        onBlur={onBlur(props)}\n        onFocus={onFocus(props)}\n      >\n        {props.rating}\n      </div>\n      <div\n        className=\"RatingControls RatingDecrease\"\n        onClick={() => props.setRating(props.rating - 1)}\n      ></div>\n    </div>\n  );\n}\n\nexport default Rating;\n","function sum(ratings) {\n  return ratings.reduce((a, b) => a + b, 0);\n}\n\nfunction avg(ratings) {\n  return sum(ratings) / 11.0;\n}\n\nfunction correction(ratings) {\n  const ratingsAverage = avg(ratings);\n  return ratings.reduce((acc, r) => acc + Math.max(0, r - ratingsAverage), 0);\n}\n\nfunction rating(ratings) {\n  const sumWithCorrection = sum(ratings) + correction(ratings);\n  const sumWithCorrectionRounded = Math.round(sumWithCorrection);\n  return sumWithCorrectionRounded / 11.0;\n}\n\nconst RMath = {\n  sum, \n  avg, \n  correction, \n  rating\n}\n\nexport default RMath","function round(n, precision) {\n  const p = precision ?? 2;\n  const multiplier = Math.pow(10, p);\n  return Math.floor((n + Number.EPSILON) * multiplier) / multiplier;\n}\n\nfunction numberIntegerPart(n) {\n  return parseInt(n).toString()\n}\n\nfunction numberFractionalPart(n) {\n  const fractional = n - numberIntegerPart(n)\n  return zeroFill(parseInt(fractional * Math.pow(10, 2)), 2)\n}\n\nfunction isInteger(n) {\n  return parseInt(numberFractionalPart(n)) === 0;\n}\n\nfunction zeroFill(n, minLength) {\n  console.log({n, minLength})\n  let nStr = n.toString()\n  let nbZeroes = Math.max(0, minLength - nStr.length)\n  return `${ '0'.repeat(nbZeroes) }${ nStr }`\n}\n\nconst UI = {\n  round,\n  numberIntegerPart,\n  numberFractionalPart,\n  zeroFill,\n  isInteger\n}\n\nexport default UI","import UI from './UI'\n  \nfunction SquadRating(props) {\n    const ratingIntegerPart = UI.numberIntegerPart(props.rating)\n    const ratingFractionalPart = UI.numberFractionalPart(props.rating)\n\n    const isExact = parseInt(ratingFractionalPart) === 0;\n\n    const decimalPart = !isExact \n        ? <span className='decimal'>.{ratingFractionalPart}</span> \n        : \"\"\n    \n    return <div className='squad-rating'><span>{ratingIntegerPart}{decimalPart}</span></div>\n}\n\nexport default SquadRating;","import { useState } from \"react\";\n\nfunction RatingResetControls({onReset}) {\n\n  const [value, setValue] = useState(77);\n\n  return <div className=\"rating-reset-controls\">\n    <button onClick={() => setValue(prev => prev - 1)}>-</button>\n    <span className=\"rating-reset-value\">{value}</span>\n    <button onClick={() => setValue(prev => prev + 1)}>+</button>\n    <button onClick={(e) => {\n      if (window.confirm(`This will reset all current ratings to ${value}. Are you sure you want to continue?`)) {\n        onReset(value)\n      }\n    }}>Reset</button>\n  </div>\n}\n\nexport default RatingResetControls;\n","import './App.css';\nimport Rating from './Rating.jsx'\nimport RatingChange from './RatingChange.jsx'\nimport SquadRating from './SquadRating.jsx'\nimport React, { useState } from 'react';\nimport RMath from './RMath'\nimport UI from './UI'\nimport RatingResetControls from './RatingResetControls';\n\nfunction ratingsArrayOf(rating) {\n  return new Array(11).fill(rating)\n}\n\nconst BASE_RATINGS = ratingsArrayOf(80)\n\n\nfunction App() {\n\n  const [ratings, baseSetRatings] = useState(BASE_RATINGS)\n  const setRatings = ratings => baseSetRatings([...ratings])\n\n  const setRating = i => r => {\n    ratings[i] = r\n    setRatings(ratings)\n  }\n\n  const squadAverage = RMath.avg(ratings)\n  const squadRating = RMath.rating(ratings)\n\n  const notices = [];\n  if (UI.isInteger(squadRating)) {\n    notices.push(<><span className='emoji'>✅</span> The squad rating is a whole number!</>)\n  } else {\n    notices.push(<><span className='emoji'>⚠️</span> The squad rating has a decimal part. You can decrease some ratings.</>)\n  }\n  \n\n  return (\n    <div className=\"App\">\n      <SquadRating rating={squadRating} />\n\n      <div className='ratings-wrapper'>\n        <div className='ratings'>\n          {ratings.map((r, i) => <Rating rating={r} setRating={setRating(i)} avg={squadAverage} />)}\n        </div>\n      </div>\n\n\n      <div className='controls'>\n        <div>\n          <button className=\"btn\" onClick={() => {\n            ratings.sort((a, b) => b - a)\n            setRatings(ratings)\n          }}>Sort Ratings</button>\n        </div>\n        <div>\n          <RatingResetControls onReset={value => setRatings(ratingsArrayOf(value))}/>\n        </div>\n      </div>\n          \n      <div className='notices'>\n        {notices.map(notice => <p>{notice}</p>)}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}